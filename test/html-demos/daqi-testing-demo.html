<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DAQI Testing - Color Level Verification</title>
    <style>
        body {
            font-family: 'GDS Transport', arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f3f2f1;
            color: #0b0c0c;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: #0b0c0c;
            margin-bottom: 30px;
        }

        .daqi-test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .daqi-test-card {
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: transform 0.2s;
        }

        .daqi-test-card:hover {
            transform: scale(1.05);
        }

        .daqi-cell {
            width: 60px;
            height: 60px;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 20px;
            border-radius: 8px;
        }

        .level-info {
            font-weight: bold;
            margin: 10px 0;
        }

        .color-info {
            font-size: 12px;
            color: #666;
            margin: 5px 0;
        }

        .advice-preview {
            font-size: 11px;
            color: #555;
            margin-top: 10px;
            max-height: 60px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .daqi-bar-demo {
            display: flex;
            gap: 2px;
            margin: 30px 0;
            justify-content: center;
        }

        .bar-segment {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            border-radius: 4px;
        }

        .bar-segment:last-child {
            width: 100px; /* DAQI 10 is wider */
        }

        .controls {
            text-align: center;
            margin: 30px 0;
        }

        .test-button {
            background: #1d70b8;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            margin: 5px;
            transition: background 0.2s;
        }

        .test-button:hover {
            background: #003078;
        }

        .console-output {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            margin: 20px 0;
        }

        .range-labels {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            font-size: 14px;
            font-weight: bold;
        }

        .range-low { color: #00703c; }
        .range-moderate { color: #b58900; }
        .range-high { color: #d4351c; }
        .range-very-high { color: #4c2c92; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ§ª DAQI Color Testing Interface</h1>
        <p style="text-align: center; color: #505a5f;">
            Test and verify DAQI levels (1-10) with their corresponding colors and cell properties
        </p>

        <div class="controls">
            <button class="test-button" onclick="testSingleLevel()">Test Single Level</button>
            <button class="test-button" onclick="testAllLevels()">Test All Levels</button>
            <button class="test-button" onclick="testRangeComparison()">Compare Ranges</button>
            <button class="test-button" onclick="clearConsole()">Clear Output</button>
        </div>

        <div class="daqi-bar-demo" id="daqiBar">
            <!-- Will be populated by JavaScript -->
        </div>

        <div class="range-labels">
            <span class="range-low">Low (1-3)</span>
            <span class="range-moderate">Moderate (4-6)</span>
            <span class="range-high">High (7-9)</span>
            <span class="range-very-high">Very High (10)</span>
        </div>

        <div class="daqi-test-grid" id="testGrid">
            <!-- Will be populated by JavaScript -->
        </div>

        <div class="console-output" id="consoleOutput">
            Ready to test DAQI levels! Click a button above to start.
        </div>
    </div>

    <script src="../daqi-testing-function.js"></script>
    <script>
        /* global DAQITesting */
        // ''
        
        // Override console.log to capture output
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            const output = document.getElementById('consoleOutput');
            output.textContent += args.join(' ') + '\n';
            output.scrollTop = output.scrollHeight;
        };

        // Initialize the display
        function initializeDisplay() {
            createVisualGrid();
            createVisualBar();
        }

        function createVisualGrid() {
            const grid = document.getElementById('testGrid');
            grid.innerHTML = '';

            for (let i = 1; i <= 10; i++) {
                const info = DAQITesting.getDAQIColorInfo(i);
                
                const card = document.createElement('div');
                card.className = 'daqi-test-card';
                card.innerHTML = `
                    <div class="daqi-cell" style="
                        background-color: ${info.colors.background};
                        color: ${info.colors.text};
                    ">${i}</div>
                    <div class="level-info">${info.colors.emoji} ${info.level}</div>
                    <div class="color-info">
                        BG: ${info.colors.background}<br>
                        Text: ${info.colors.text}
                    </div>
                    <div class="advice-preview">${info.advice}</div>
                `;
                
                card.onclick = () => testSpecificLevel(i);
                grid.appendChild(card);
            }
        }

        function createVisualBar() {
            const bar = document.getElementById('daqiBar');
            bar.innerHTML = '';

            for (let i = 1; i <= 10; i++) {
                const info = DAQITesting.getDAQIColorInfo(i);
                
                const segment = document.createElement('div');
                segment.className = 'bar-segment';
                segment.style.backgroundColor = info.colors.background;
                segment.style.color = info.colors.text;
                segment.textContent = i;
                segment.title = `DAQI ${i} - ${info.level}`;
                
                if (i === 10) {
                    segment.style.width = '100px';
                }
                
                segment.onclick = () => testSpecificLevel(i);
                bar.appendChild(segment);
            }
        }

        const SEPARATOR_LENGTH = 40;
        const DAQI_LEVEL_MODERATE = 5;
        const DAQI_LEVEL_LOW = 2;
        const DAQI_LEVEL_HIGH = 8;
        const DAQI_LEVEL_MAX = 10;
        const TEST_RANGE_LEVELS = [DAQI_LEVEL_LOW, DAQI_LEVEL_MODERATE, DAQI_LEVEL_HIGH, DAQI_LEVEL_MAX];
        const DEFAULT_TEST_LEVEL = '5';

        function testSingleLevel() {
            const level = prompt('Enter DAQI level to test (1-10):', DEFAULT_TEST_LEVEL);
            if (level && level >= 1 && level <= 10) {
                testSpecificLevel(Number.parseInt(level, 10));
            }
        }

        function testSpecificLevel(level) {
            clearConsole();
            console.log(`ðŸŽ¯ Testing DAQI Level ${level}`);
            console.log('â•'.repeat(SEPARATOR_LENGTH));
            DAQITesting.testDAQILevel(level);
        }

        function testAllLevels() {
            clearConsole();
            DAQITesting.testAllDAQILevels();
        }

        function testRangeComparison() {
            clearConsole();
            console.log('ðŸ” Testing Representative Values from Each Range');
            DAQITesting.testDAQIRange(TEST_RANGE_LEVELS);
        }

        function clearConsole() {
            document.getElementById('consoleOutput').textContent = '';
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeDisplay);
    </script>
</body>
</html>