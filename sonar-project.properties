# To set up Sonar cloud follow https://github.com/DEFRA/cdp-documentation/blob/main/howto/sonarcloud.md
# Update properties in this file as per the howto instructions
# Uncomment properties in this .github/workflows/check-pull-request.yml
# Uncomment properties in this .github/workflows/publish.yml
# Uncomment properties in this .github/workflows/publish-hotfix.yml

sonar.projectKey=DEFRA_aqie-front-end
sonar.organization=defra

# This is the name and version displayed in the SonarCloud UI.
sonar.projectName=aqie-front-end
sonar.projectVersion=1.1.0

sonar.links.homepage=https://github.com/DEFRA/aqie-front-end
sonar.links.ci=https://github.com/DEFRA/aqie-front-end/actions
sonar.links.scm=https://github.com/DEFRA/aqie-front-end
sonar.links.issue=https://github.com/DEFRA/aqie-front-end/issues

# Basic configuration - match GitHub Actions workflow exactly
sonar.sourceEncoding=UTF-8
sonar.javascript.file.suffixes=.js
sonar.html.file.suffixes=.html
sonar.sources=src/server/,src/config/,src/helpers/,src/index.js,test/
sonar.tests=src/server/,src/config/,src/helpers/,test/
sonar.test.inclusions=**/*.test.js,**/*.test.*.js

# Exclude from all analysis (issues, coverage, duplication)
# Match GitHub workflow configuration to ensure consistency
# Include all files that don't need coverage in exclusions as well
sonar.exclusions=**/*.test.js,**/*.test.*.js,**/test-helpers/**,**/test-setup.js,src/client/**,src/server/locations/cy/**,src/server/location-id/cy/**,src/src/govuk/**/*,src/config/nunjucks/filters/format-currency.js,src/**/__fixtures__/**,src/server/data/**/daqi-and-pollutants*.js,src/server/data/**/navigation*.js,src/server/data/**/footer-and-ui*.js,src/server/data/**/en.js,src/server/data/**/cy.js,src/server/location-id/controller-helpers.js,src/server/location-id/controller-workflow.js,src/server/common/helpers/catch-fetch-error.js,src/server/common/helpers/location-controller-helper.js,src/server/common/helpers/mock-daqi-level.js,src/server/common/helpers/mock-pollutant-level.js,src/server/common/helpers/errors.js,src/server/common/helpers/fetch-oauth-token.js,src/server/common/helpers/metrics.js,src/server/common/helpers/proxy-agent.js,src/server/common/helpers/proxy-fetch.js,src/server/common/helpers/pulse.js,src/server/common/helpers/redis-client.js,src/server/common/helpers/request-tracing.js,src/server/common/helpers/sentence-case.js,src/server/common/helpers/serve-static-files.js,src/server/common/helpers/sort-by-timestamp.js,src/server/common/helpers/start-server.js,src/server/common/helpers/stringUtils.js,src/server/common/helpers/transform-summary-keys.js,src/server/common/helpers/proxy/**,src/server/common/helpers/secure-context/**,src/server/common/helpers/session-cache/**,src/server/common/helpers/logging/**,src/server/common/constants/**,src/server/common/components/**

# Test exclusions (same as GitHub workflow)
sonar.test.exclusions=src/client/**,src/server/locations/cy/**,src/src/govuk/**/*,src/**/__fixtures__/**

# Coverage exclusions - files that don't need test coverage requirements (same as GitHub workflow)
sonar.coverage.exclusions=src/client/**,coverage/**,node_modules/**,test/**,**/test/**,**/*.test.js,**/*.test.*.js,**/test-helpers/**,**/test-setup.js,src/server/locations/test-helpers/**,src/server/locations/cy/**,src/server/location-id/cy/**,src/src/govuk/**/*,src/config/nunjucks/filters/format-currency.js,src/**/__fixtures__/**,src/server/location-id/controller-helpers.js,src/server/location-id/controller-workflow.js,src/server/common/helpers/catch-fetch-error.js,src/server/common/helpers/location-controller-helper.js,src/server/common/helpers/mock-daqi-level.js,src/server/common/helpers/mock-pollutant-level.js,src/server/common/helpers/errors.js,src/server/common/helpers/fetch-oauth-token.js,src/server/common/helpers/metrics.js,src/server/common/helpers/proxy-agent.js,src/server/common/helpers/proxy-fetch.js,src/server/common/helpers/pulse.js,src/server/common/helpers/redis-client.js,src/server/common/helpers/request-tracing.js,src/server/common/helpers/sentence-case.js,src/server/common/helpers/serve-static-files.js,src/server/common/helpers/sort-by-timestamp.js,src/server/common/helpers/start-server.js,src/server/common/helpers/stringUtils.js,src/server/common/helpers/transform-summary-keys.js,src/server/common/helpers/proxy/**,src/server/common/helpers/secure-context/**,src/server/common/helpers/session-cache/**,src/server/common/helpers/logging/**,src/server/common/constants/**,src/server/common/components/**

# Exclude from copy-paste detection (duplication analysis)
sonar.cpd.exclusions=src/server/data/**/daqi-and-pollutants*.js,src/server/data/**/navigation*.js,src/server/data/**/footer-and-ui*.js,src/server/data/**/en.js,src/server/data/**/cy.js

# Additional specific exclusions for the exact files mentioned
sonar.issue.exclusions.multicriteria=e1,e2,e3,e4,e5
sonar.issue.exclusions.multicriteria.e1.ruleKey=javascript:S1192
sonar.issue.exclusions.multicriteria.e1.resourceKey=src/server/data/en/daqi-and-pollutants.js
sonar.issue.exclusions.multicriteria.e2.ruleKey=javascript:S1192
sonar.issue.exclusions.multicriteria.e2.resourceKey=src/server/data/cy/daqi-and-pollutants-welsh.js
sonar.issue.exclusions.multicriteria.e3.ruleKey=javascript:S1192
sonar.issue.exclusions.multicriteria.e3.resourceKey=src/server/data/**/navigation*.js
sonar.issue.exclusions.multicriteria.e4.ruleKey=javascript:S1192
sonar.issue.exclusions.multicriteria.e4.resourceKey=src/server/data/**/footer-and-ui*.js
sonar.issue.exclusions.multicriteria.e5.ruleKey=javascript:S1192
sonar.issue.exclusions.multicriteria.e5.resourceKey=src/server/data/**/*content*.js

# Node.js project - no Python files present

# Fallback settings (GitHub Actions workflows override these)
sonar.newCode.referenceBranch=main